<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html xmlns:fn="http://www.w3.org/2005/xpath-functions" xmlns:p="http://outerx.org/daisy/1.0#publisher" xmlns:i18n="http://apache.org/cocoon/i18n/2.1" xmlns:einclude="http://outerx.org/daisy/1.0#externalinclude" xmlns:d="http://outerx.org/daisy/1.0">
<head>
<META http-equiv="Content-Type" content="text/html; charset=UTF-8">
<link href="resources/css/books.css" type="text/css" rel="stylesheet">
<script src="resources/js/toggle.js" type="text/javascript"></script>
</head>
<body onLoad="appendToDiv();">
<div class="all">
<div class="top">
<div class="chunkNavigation">
<div class="topCut"></div>
<div class="logoTitle">
<span><img src="resources/images/see-logo.png"></span><span class="bookTitle">BAPI Adapter</span>
</div>
<div class="navigation">
<ul>
<li class="first">
<a href="dsy29348-SEEDOC.html">&nbsp;<img src="resources/images/small_left.gif">&nbsp;Previous&nbsp;</a>
</li>
<li class="middle">
<a href="chunk1.html"><img src="resources/images/content.png">Table of Contents&nbsp;</a>
</li>
<li class="last">
<a href="dsy29350-SEEDOC.html">&nbsp;Next&nbsp;<img src="resources/images/small_right.gif"></a>
</li>
</ul>
</div>
</div>
</div>
<div class="content">
<div class="left">
<a href="dsy29348-SEEDOC.html"><img src="resources/images/big_left.gif" class="centeredImage"></a>
</div>
<div class="center">
<h2 xmlns:ns="http://outerx.org/daisy/1.0" daisyBranch="1" daisyDocument="29349-SEEDOC" daisyLanguage="2" id="dsy29349-SEEDOC">Relevant steps of a BAPI call</h2>
        
<p>To call a BAPI via BIC mapping usually the following steps have to be made:
</p>
        
<ul>
            
<li>Open a BAPI connection</li>
            
<ul>
                
<li>
                    
<p>Using the BIC function openBAPIConnection(&lt;Connection Data&gt;,
&lt;Connection name&gt;) the connection to the SAP system can be set. The
connection name will be defined by the mapping developer.</p>
                
</li>
            
</ul>
        
</ul>
        
<ul>
            
<li>
                
<p>Create a BAPI call</p>
            
</li>
        
</ul>
        
<blockquote>
            
<ul>
                
<li>Using the function createBAPICall(&lt;Name of the RFC function&gt;,
&lt;Connection name&gt;) the BAPI call can be defined.</li>
            
</ul>
        
</blockquote>
        
<ul>
            
<li>
                
<p>Set the Import parameters</p>
            
</li>
        
</ul>
        
<blockquote>
            
<ul>
                
<li>
                    
<p>Using the function setBAPIImportValue(&lt;ParameterName&gt;, &lt;Value&gt;)
an Import parameter of the BAPI can be set.</p>
                
</li>
            
</ul>
        
</blockquote>
        
<ul>
            
<li>
                
<p>Execute the BAPI call</p>
            
</li>
        
</ul>
        
<blockquote>
            
<ul>
                
<li>
                    
<p>Using the function executeBAPICall a BAPI call can be executed.</p>
                
</li>
            
</ul>
        
</blockquote>
        
<p class="note">More detailed information about these bapi functions can be
found below.</p>
        
<p class="note">Further BAPI functions can be evaluated through the online help
of BIC MD or the pdf documentation shipped on the installation media.</p>
        
<h7 id="s221">For more details please refer to</h7>
        
<h8 daisyBranch="1" daisyDocument="6975-SEEDOC" daisyLanguage="2" id="dsy6975-SEEDOC">openBAPIConnection</h8>
        
<h12 id="s222">Syntax</h12>
        
<p>
            
<strong>openBAPIConnection(connectionName, host, system, client, user,
password, language)</strong>
        
</p>
        
<p>
            
<strong>openBAPIConnection(connectionName, messageServer, system, client,
user, password, language, group)</strong>
        
</p>
        
<p>
            
<strong>openBAPIConnection(connectionName, masterDataUniqueID)</strong>
        
</p>
        
<p>
            
<strong>openBAPIConnection(connectionName, masterDataUniqueID, retryInterval,
maxNumberOfRetries)</strong>
        
</p>
        
<p>
            
<strong>openBAPIConnection(connectionName, retryInterval,
maxNumberOfRetries)*</strong>
        
</p>
        
<p>
            
<strong>openBAPIConnection(connectionName)*</strong>
        
</p>
        
<p>*only for mappings, which are used with a <em>converterBapi</em> component in
a BIS 6 process.</p>
        
<h12 id="s223">Description</h12>
        
<p>Opens a <em>BAPI connection</em>. Please
refer also to .</p>
        
<h12 id="s224">Parameter(s)</h12>
        
<table class="content" column-widths="20%;20%" print-column-widths="20%;20%" width="100%">
<col width="20%">
<col width="20%">
<col>
<tbody>
                
<tr>
                    
<th>
                        
<p>Parameter</p>
                    
</th>
                    <th>
                        
<p>Type</p>
                    
</th>
                    <th>
                        
<p>Description</p>
                    
</th>
                
</tr>
                
<tr>
                    
<td>
                        
<p align="center">connectionName</p>
                    
</td>
                    <td>
                        
<p align="center">$</p>
                    
</td>
                    <td>
                        
<p align="left">The name for a <em>BAPI
connection</em>. If the <em>convertBapi</em>
component is used within a BIS 6 process and IDOC Connector masterdata
parameters are set in the component input, then the <em>connectionName</em> is
the only parameter that needs to be specified as mandatory.</p>
                    
</td>
                
</tr>
                
<tr>
                    
<td valign="top">
                        
<p align="center">host</p>
                    
</td>
                    <td valign="top">
                        
<p align="center">$</p>
                    
</td>
                    <td valign="top">
                        
<p>The name of the SAP host.</p>
                    
</td>
                
</tr>
                
<tr>
                    
<td valign="top">
                        
<p align="center">messageServer</p>
                    
</td>
                    <td valign="top">
                        
<p align="center">$</p>
                    
</td>
                    <td valign="top">
                        
<p>The name of the SAP message server</p>
                    
</td>
                
</tr>
                
<tr>
                    
<td valign="top">
                        
<p align="center">system</p>
                    
</td>
                    <td valign="top">
                        
<p align="center">$</p>
                    
</td>
                    <td valign="top">
                        
<p>The SAP system number.</p>
                    
</td>
                
</tr>
                
<tr>
                    
<td valign="top">
                        
<p align="center">client</p>
                    
</td>
                    <td valign="top">
                        
<p align="center">$</p>
                    
</td>
                    <td valign="top">
                        
<p>The SAP client.</p>
                    
</td>
                
</tr>
                
<tr>
                    
<td valign="top">
                        
<p align="center">user</p>
                    
</td>
                    <td valign="top">
                        
<p align="center">$</p>
                    
</td>
                    <td valign="top">
                        
<p>The user name.</p>
                    
</td>
                
</tr>
                
<tr>
                    
<td valign="top">
                        
<p align="center">password</p>
                    
</td>
                    <td valign="top">
                        
<p align="center">$</p>
                    
</td>
                    <td valign="top">
                        
<p>The user password.</p>
                    
</td>
                
</tr>
                
<tr>
                    
<td valign="top">
                        
<p align="center">language</p>
                    
</td>
                    <td valign="top">
                        
<p align="center">$</p>
                    
</td>
                    <td valign="top">
                        
<p>The preferred user language.</p>
                    
</td>
                
</tr>
                
<tr>
                    
<td valign="top">
                        
<p align="center">group</p>
                    
</td>
                    <td valign="top">
                        
<p align="center">$</p>
                    
</td>
                    <td valign="top">
                        
<p>The group specification for connection via MessageServer</p>
                    
</td>
                
</tr>
                
<tr>
                    
<td valign="top">
                        
<p align="center">masterDataUniqueID</p>
                    
</td>
                    <td valign="top">
                        
<p align="center">$</p>
                    
</td>
                    <td valign="top">
                        
<p>The unique ID of the IDOC Connector master data (<em>SAP Address ID</em>),
which contains all connection information, refer to the topic
.</p>
                    
</td>
                
</tr>
                
<tr>
                    
<td valign="top">
                        
<p align="center">retryInterval</p>
                    
</td>
                    <td valign="top">
                        
<p align="center">$</p>
                    
</td>
                    <td valign="top">
                        
<p>The time interval in milliseconds between each attempt to connect. If this
parameter is used with the<em> convertBapi</em>
component, this setting will overwrite the settings of the component.</p>
                    
</td>
                
</tr>
                
<tr>
                    
<td valign="top">
                        
<p align="center">maxNumerOfRetries</p>
                    
</td>
                    <td valign="top">
                        
<p align="center">$</p>
                    
</td>
                    <td valign="top">
                        
<p>The overall number of attempts to connect.If this parameter is used with the
<em>convertBapi</em> component, this setting
will overwrite the settings of the component.</p>
                    
</td>
                
</tr>
            
</tbody>
</table>
        
<p class="note">
            
<strong>
                <strong>Note</strong>:</strong> The
<em>masterDataUniqueID</em> identifies records in the <em>tsapaddress</em>
database table which inform about a certain SAP connection (<em>user</em>,
<em>password</em>, <em>host</em>, <em>system</em>, <em>language</em>) and SAP
client.</p>
        
<h6 daisyBranch="1" daisyDocument="15258-SEEDOC" daisyLanguage="2" id="dsy15258-SEEDOC">Return Value</h6>
        
<p>This command does not return a value.</p>
        
<h12 id="s225">Warning(s) / Error(s)</h12>
        
<p>Almost all BAPI warnings / errors may be reported here, except a violation of
the BAPI call command sequence, because this is naturally the initial performed
BAPI command.</p>
        
<ul>
            
<li>
                
<em>8102</em>
            
</li>
            
<li>
                
<em>8103</em>
            
</li>
            
<li>
                
<em>8104</em>
            
</li>
            
<li>
                
<em>8105</em>
            
</li>
            
<li>
                
<em>8106</em>
            
</li>
            
<li>
                
<em>8107</em>
            
</li>
            
<li>
                
<em>8109</em>
            
</li>
            
<li>
                
<em>8110</em>
            
</li>
            
<li>
                
<em>8111</em>
            
</li>
        
</ul>
        
<h12 id="s226">Example</h12>
        
<pre>local connectionName$;
local host$;
local system$;
local client$;
local user$;
local password$;
local language$;

connectionName$ = "MyBAPIConnection";
host$           = "10.0.0.41";
system$         = "00";
client$         = "800";
user$           = "James.Smith";
password$       = "secret";
language$       = "EN";

openBAPIConnection(connectionName$, host$, system$, client$, user$, password$, language$);
</pre>
        
<p>Refer to further BAPI <em>
                <a href="#dsy15226-SEEDOC">
                    <p:linkInfo access="read,fullRead,write,publish,delete" documentName="BAPI Call Code Samples" documentType="SimpleDocument" href="daisy:15226-SEEDOC" lastVersionId="10" liveVersionId="10">
                        <p:linkPartInfo id="7" mimeType="text/xml" name="SimpleDocumentContent" size="3154"/>
                    </p:linkInfo>examples</a>
            </em>.</p>
        
<h8 daisyBranch="1" daisyDocument="6977-SEEDOC" daisyLanguage="2" id="dsy6977-SEEDOC">createBAPICall</h8>
        
<h12 id="s227">Syntax</h12>
        
<p>
            
<strong>createBAPICall(connectionName, methodName)</strong>
        
</p>
        
<h12 id="s228">Description</h12>
        
<p>
            
<em>Creates a BAPI call</em>. Please refer
also to<em>
                <a href="#dsy15226-SEEDOC">
                    <p:linkInfo access="read,fullRead,write,publish,delete" documentName="BAPI Call Code Samples" documentType="SimpleDocument" href="daisy:15226-SEEDOC" lastVersionId="10" liveVersionId="10">
                        <p:linkPartInfo id="7" mimeType="text/xml" name="SimpleDocumentContent" size="3154"/>
                    </p:linkInfo>
                    <em>SAP BAPI calls</em>
                </a>.</em>
        
</p>
        
<h12 id="s229">Parameter(s)</h12>
        
<table class="content" column-widths="20%;20%" print-column-widths="20%;20%" width="100%">
<col width="20%">
<col width="20%">
<col>
<tbody>
                
<tr>
                    
<th>
                        
<p>Parameter</p>
                    
</th>
                    <th>
                        
<p>Type</p>
                    
</th>
                    <th>
                        
<p>Description</p>
                    
</th>
                
</tr>
                
<tr>
                    
<td>
                        
<p align="center">connectionName</p>
                    
</td>
                    <td>
                        
<p align="center">$</p>
                    
</td>
                    <td>
                        
<p align="left">The name for a <em>BAPI
connection</em>.</p>
                    
</td>
                
</tr>
                
<tr>
                    
<td valign="top">
                        
<p align="center">methodeName</p>
                    
</td>
                    <td valign="top">
                        
<p align="center">$</p>
                    
</td>
                    <td valign="top">
                        
<p>The name of a <em>BAPI method</em>.</p>
                    
</td>
                
</tr>
            
</tbody>
</table>
        
<h6 daisyBranch="1" daisyDocument="15258-SEEDOC" daisyLanguage="2" id="dsy15258-SEEDOC">Return Value</h6>
        
<p>This command does not return a value.</p>
        
<h12 id="s230">Warning(s) / Error(s)</h12>
        
<p>A violation of the BAPI call command sequence, a general BAPI error or a SAP
specific BAPI error is indicated through</p>
        
<ul>
            
<li>
                
<em>8101</em>
            
</li>
            
<li>
                
<em>8102</em>
            
</li>
            
<li>
                
<em>8107</em>.</li>
        
</ul>
        
<h12 id="s231">Example</h12>
        
<pre>local connectionName$;
local methodeName$;

connectionName$ = "connectionName";
methodeName$    = "BAPI_BANK_CREATE";

// creates a call 
createBAPICall(connectionName$, methodeName$);</pre>
        
<p>Refer to further BAPI <a href="#dsy15226-SEEDOC">
                <p:linkInfo access="read,fullRead,write,publish,delete" documentName="BAPI Call Code Samples" documentType="SimpleDocument" href="daisy:15226-SEEDOC" lastVersionId="10" liveVersionId="10">
                    <p:linkPartInfo id="7" mimeType="text/xml" name="SimpleDocumentContent" size="3154"/>
                </p:linkInfo>
                <em>examples</em>
            </a>.</p>
        
<h8 daisyBranch="1" daisyDocument="6980-SEEDOC" daisyLanguage="2" id="dsy6980-SEEDOC">setBAPIImportValue</h8>
        
<h12 id="s232">Syntax</h12>
        
<p>
            
<strong>setBAPIImportValue</strong>
            <strong>(parameterName, value)</strong>
        
</p>
        
<h12 id="s233">Description</h12>
        
<p>Sets the <em>value</em> of
an
<em>import</em>
parameter for the created BAPI call. Please refer also to
.</p>
        
<h6 daisyBranch="1" daisyDocument="15280-SEEDOC" daisyLanguage="2" id="dsy15280-SEEDOC">Parameter(s)</h6>
        
<table class="content" column-widths="20%;20%" print-column-widths="20%;20%" width="100%">
<col width="20%">
<col width="20%">
<col>
<tbody>
                
<tr>
                    
<th>
                        
<p>Parameter</p>
                    
</th>
                    <th>
                        
<p>Type</p>
                    
</th>
                    <th>
                        
<p>Description</p>
                    
</th>
                
</tr>
                
<tr>
                    
<td>
                        
<p align="center">parameterName</p>
                    
</td>
                    <td>
                        
<p align="center">$</p>
                    
</td>
                    <td>
                        
<p align="left">The<em>parameter
name</em>.</p>
                    
</td>
                
</tr>
                
<tr>
                    
<td valign="top">
                        
<p align="center">value</p>
                    
</td>
                    <td valign="top">
                        
<p align="center">$</p>
                    
</td>
                    <td valign="top">
                        
<p>The <em>value</em>.</p>
                    
</td>
                
</tr>
            
</tbody>
</table>
        
<h6 daisyBranch="1" daisyDocument="15258-SEEDOC" daisyLanguage="2" id="dsy15258-SEEDOC">Return Value</h6>
        
<p>This command does not return a value.</p>
        
<h6 daisyBranch="1" daisyDocument="15234-SEEDOC" daisyLanguage="2" id="dsy15234-SEEDOC">Warning(s) / Error(s)</h6>
        
<p>A violation of the BAPI call command sequence, respectively a general BAPI
error, is indicated through</p>
        
<ul>
            
<li>
                
<em>8101</em>
            
</li>
            
<li>
                
<em>8102.</em>
            
</li>
        
</ul>
        
<h12 id="s234">Example</h12>
        
<pre>local value$;
local parameterName$;

parameterName$ = "BANK_METHOD";
value$         = "M--M";

// sets the value
setBAPIImportValue(parameterName$, value$);</pre>
        
<p>Refer to further BAPI <em>
                <a href="#dsy15226-SEEDOC">
                    <p:linkInfo access="read,fullRead,write,publish,delete" documentName="BAPI Call Code Samples" documentType="SimpleDocument" href="daisy:15226-SEEDOC" lastVersionId="10" liveVersionId="10">
                        <p:linkPartInfo id="7" mimeType="text/xml" name="SimpleDocumentContent" size="3154"/>
                    </p:linkInfo>examples</a>
            </em>.</p>
        
<h8 daisyBranch="1" daisyDocument="6979-SEEDOC" daisyLanguage="2" id="dsy6979-SEEDOC">executeBAPICall</h8>
        
<h12 id="s235">Syntax</h12>
        
<p>
            
<strong>execute</strong>
            <strong>BAPICall()</strong>
        
</p>
        
<h12 id="s236">Description</h12>
        
<p>
            
<em>Executes a BAPI call</em>. Please refer
also to<em>.</em>
        
</p>
        
<h6 daisyBranch="1" daisyDocument="15257-SEEDOC" daisyLanguage="2" id="dsy15257-SEEDOC">Parameter(s)</h6>
        
<p>This command does not expect any parameters.</p>
        
<h6 daisyBranch="1" daisyDocument="15258-SEEDOC" daisyLanguage="2" id="dsy15258-SEEDOC">Return Value</h6>
        
<p>This command does not return a value.</p>
        
<h6 daisyBranch="1" daisyDocument="15234-SEEDOC" daisyLanguage="2" id="dsy15234-SEEDOC">Warning(s) / Error(s)</h6>
        
<p>A violation of the BAPI call command sequence, respectively a general BAPI
error, is indicated through</p>
        
<ul>
            
<li>
                
<em>8101</em>
            
</li>
            
<li>
                
<em>8102.</em>
            
</li>
        
</ul>
        
<h12 id="s237">Example</h12>
        
<pre>// execute a created call
executeBAPICall();</pre>
        
<p>Refer to further BAPI <a href="#dsy15226-SEEDOC">
                <p:linkInfo access="read,fullRead,write,publish,delete" documentName="BAPI Call Code Samples" documentType="SimpleDocument" href="daisy:15226-SEEDOC" lastVersionId="10" liveVersionId="10">
                    <p:linkPartInfo id="7" mimeType="text/xml" name="SimpleDocumentContent" size="3154"/>
                </p:linkInfo>
                <em>examples</em>
            </a>.</p>
        
<h8 daisyBranch="1" daisyDocument="15226-SEEDOC" daisyLanguage="2" id="dsy15226-SEEDOC">BAPI Call Code Samples</h8>
        
<h9 id="s238">Simple BAPI Call</h9>
        
<pre>// connect to SAP
openBAPIConnection(
           "testConnection",
           "10.0.0.41", // host
          &nbsp;"00",        // system
          &nbsp;"800",       // client
           "TESTUSER",  // user
           "testpsw",   // password
          &nbsp;"EN");       // language

// create a call to use a SAP BAPI method for BANK data
createBAPICall("testConnection", "BAPI_BANK_CREATE");

// see how many import parameters are expected for BAPI_BANK_CREATE    
local parameterImportCount%;
parameterImportCount% = getBAPIImportFieldCount());

// set some values which should be transferred to the SAP system by index / by name
setBAPIImportValueByIndex(4, "Key" );
setBAPIImportValue("BANK_METHOD", "M--M");
  
// transmit the parameters and execute BAPI_BANK_CREATE on the SAP server         
executeBAPICall();

// see how many export parameters are received from a BAPI_BANK_CREATE execution
local parameterExportCount%;
parameterExportCount = getBAPIExportFieldCount()

// trace some exported (returned) values, access by index / by name
traceln(getBAPIExportValue("RETURN"));
traceln(getBAPIExportValueByIndex(2));
 
// close of the connection not required</pre>
        
<h9 id="s239">Using a Structure</h9>
        
<pre>// ... connect to SAP, create BAPI_BANK_CREATE call ...

// pick a structure from the import parameters and mark it as currently active structure
getBAPIImportStructure("BANK_ADDRESS");

// set some structure values which should be transferred to the SAP system by index / by name
setBAPIStructureFieldValueByIndex(0, "FR709-BANK_NAME");
setBAPIStructureFieldValue("REGION", "FR709-REGION");

// ... execute the BAPI call ...

// pick a structure from the exported parameters and mark it as currently active structure
getBAPIExportStructure("RETURN");

// trace some exported (returned) structure values, access by index / by name
traceln(getBAPIStructureFieldValue("NUMBER"));
traceln(getBAPIStructureFieldValueByIndex(2));

// ...</pre>
        
<h9 id="s240">Using a Table</h9>
        
<pre>// ... connect to SAP, create BAPI_BARCODE_SENDLIST call ...

// pick a table from the parameters and mark it as currently active table
getBAPITable("BARCODETABLE");

// create row, set some table (column) values which should be transferred to the SAP system by index / by name
addBAPITableRow();
setBAPITableFieldValueByIndex(0, "FR709-BARCODE");
setBAPITableFieldValue("CONTREP", "FR709-CONTREP");

// ... execute the BAPI call

// pick the table from the exported parameters and mark it as currently active table
getBAPITable("BARCODETABLE");

// trace some exported (returned) table values, access by index / by name
local j%;
local end%;
end% = getBAPITableRowCount();
for j% = 1 to end%
    setBAPITableRow(j%);
    traceln(getBAPITableFieldValueByIndex(0));
    traceln(getBAPITableFieldValue("CONTREP"));
next

// ...</pre>
        
<h9 id="s241">BAPI Connection in an BIS Environment</h9>
        
<pre>// <em>Connection name, retry-Interval, max. number of retries</em>
openBAPIConnection("testConnection", 10, 10);

// or
// ... master data unique ID
// openBAPIConnection("testConnection", "0b27fea1-9965-11dd-a86b-692a0a0a1259");</pre>
        
</div>
<div class="right">
<a href="dsy29350-SEEDOC.html"><img src="resources/images/big_right.gif"></a>
</div>
</div>
<div id="pageNumber">
<div class="numberAndTitle">
<span class="bottomTitle">Training BIC 6 Advanced</span><span class="count">136</span>
</div>
</div>
</div>
</body>
</html>
