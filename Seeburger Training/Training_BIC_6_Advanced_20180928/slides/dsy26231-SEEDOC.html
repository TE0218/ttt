<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html xmlns:fn="http://www.w3.org/2005/xpath-functions" xmlns:p="http://outerx.org/daisy/1.0#publisher" xmlns:i18n="http://apache.org/cocoon/i18n/2.1" xmlns:einclude="http://outerx.org/daisy/1.0#externalinclude" xmlns:d="http://outerx.org/daisy/1.0">
<head>
<META http-equiv="Content-Type" content="text/html; charset=UTF-8">
<link href="resources/css/books.css" type="text/css" rel="stylesheet">
<script src="resources/js/toggle.js" type="text/javascript"></script>
</head>
<body onLoad="appendToDiv();">
<div class="all">
<div class="top">
<div class="chunkNavigation">
<div class="topCut"></div>
<div class="logoTitle">
<span><img src="resources/images/see-logo.png"></span><span class="bookTitle">SQL Adapter</span>
</div>
<div class="navigation">
<ul>
<li class="first">
<a href="dsy29096-SEEDOC.html">&nbsp;<img src="resources/images/small_left.gif">&nbsp;Previous&nbsp;</a>
</li>
<li class="middle">
<a href="chunk1.html"><img src="resources/images/content.png">Table of Contents&nbsp;</a>
</li>
<li class="last">
<a href="dsy26232-SEEDOC.html">&nbsp;Next&nbsp;<img src="resources/images/small_right.gif"></a>
</li>
</ul>
</div>
</div>
</div>
<div class="content">
<div class="left">
<a href="dsy29096-SEEDOC.html"><img src="resources/images/big_left.gif" class="centeredImage"></a>
</div>
<div class="center">
<h2 xmlns:ns="http://outerx.org/daisy/1.0" daisyBranch="1" daisyDocument="26231-SEEDOC" daisyLanguage="2" id="dsy26231-SEEDOC">SQL Adapter - Tutorial 2</h2>
        
<table column-widths="30%;70%" nokeeptogether="true" print-column-widths="30%;70%" print-width="100%" width="100%" class="content">
<col width="30%">
<col width="70%">
<tbody>
                
<tr>
                    
<th>
                        
<p>Instruction</p>
                    
</th>
                    <th>
                        
<p>Illustration</p>
                    
</th>
                
</tr>
                
<tr>
                    
<td>
                        
<ol>
                            
<li>
                                
<p>Before we are able to create the SQL structure we have to create the DB
tables at the H2 database.</p>
                            
</li>
                            
<li>
                                
<p>At first we have to start the H2 DB client. Please start this with
&lt;BICMD&gt;\bin\runH2.client.bat By double clicking this file an IE window
will be opened.</p>
                            
</li>
                            
<li>Logon details</li>
                        
</ol>
                        
<blockquote>
                            
<p>URL: jdbc:h2:tcp://localhost/H2Database<br>
user: sa<br>
Password: &lt;empty&gt;</p>
                        
</blockquote>
                    
</td>
                    <td>
                        
<p align="center">
                            
<table class="plainTable" align="center">
<tr>
<td align="center"><a href="images/26219-SEEDOC_1_2_2.jpg"><img bookStorePath="/data/resources/26219-SEEDOC_1_2_2" daisy-caption="Logon to H2 DB client" p:imageHeight="436" p:imageWidth="517" print-width="11cm" src="images/26219-SEEDOC_1_2_2.jpg" daisy-image-type="default" id="dsy_fig_16"></a></td>
</tr>
<tr>
<td class="imageCaption" align="center">Logon to H2 DB client</td>
</tr>
</table>
                        
</p>
                    
</td>
                
</tr>
                
<tr>
                    
<td>
                        
<ol start="4">
                            
<li>
                                
<p>Please copy the following code to the SQL statement text field and push the
button run.</p>
                            
</li>
                        
</ol>
                    
</td>
                    <td>
                        
<pre>CREATE TABLE CN_LINE (EDI_SENDER VARCHAR(16), EDI_RECEIVER VARCHAR(16), 
TRANS_NR NUMBER(5,0), CN_NR VARCHAR(20), NET_AMOUNT NUMBER(12,2), 
GROSS_AMOUNT NUMBER(12,2), VAT_AMOUNT NUMBER(12,2), VAT_RATE NUMBER(4,2), 
TEXT_1 VARCHAR(250), TEXT_2 VARCHAR(250), TEXT_3 VARCHAR(250));

CREATE TABLE CN_HEADER (EDI_SENDER VARCHAR(16), EDI_RECEIVER VARCHAR(16), 
STATUS VARCHAR(2), TRANS_DATE DATE, TRANS_NR NUMBER(5,0), 
VATID_SENDER VARCHAR(20), VATID_RECEIVER VARCHAR(20), FISCALNR VARCHAR(15));</pre>
                    
</td>
                
</tr>
                
<tr>
                    
<td>
                        
<ol start="5">
                            
<li>
                                
<p>With the existing database tables we are able to create the SQL structure.
</p>
                            
</li>
                            
<li>
                                
<p>Please start your mapping designer and create a new project with the name
TRAINING.</p>
                            
</li>
                            
<li>
                                
<p>Below this new project you will find two subfolder, one for messages and the
other one for mappings.</p>
                            
</li>
                            
<li>
                                
<p>Please open the folder messages and right click at the SQL message to create
a new SQL structure.</p>
                            
</li>
                            
<li>
                                
<p>The JDBC wizard will be started automatically.</p>
                            
</li>
                        
</ol>
                    
</td>
                    <td>
                        
<p align="center">
                            
<table class="plainTable" align="center">
<tr>
<td align="center"><a href="images/26209-SEEDOC_1_2_2.jpg"><img bookStorePath="/data/resources/26209-SEEDOC_1_2_2" daisy-caption="Create new SQL structure" p:imageHeight="532" p:imageWidth="524" print-width="11cm" src="images/26209-SEEDOC_1_2_2.jpg" daisy-image-type="default" id="dsy_fig_17"></a></td>
</tr>
<tr>
<td class="imageCaption" align="center">Create new SQL structure</td>
</tr>
</table>
                        
</p>
                    
</td>
                
</tr>
                
<tr>
                    
<td>
                        
<ol start="10">
                            
<li>
                                
<p>Please start with creating the first message CN_MESSAGE</p>
                            
</li>
                            
<li>
                                
<p>For each new message you have to set the main message properties.</p>
                            
</li>
                            
<li>
                                
<p>Please use the data source we created at the first exercise to connect to the
DB.</p>
                            
</li>
                            
<li>Click Connect to verify that the data source is working properly.</li>
                            
<li>
                                
<p>Please confirm the message properties by clicking the OK button.</p>
                            
</li>
                        
</ol>
                    
</td>
                    <td>
                        
<p align="center">
                            
<table class="plainTable" align="center">
<tr>
<td align="center"><a href="images/26210-SEEDOC_1_2_2.jpg"><img bookStorePath="/data/resources/26210-SEEDOC_1_2_2" daisy-caption="Create message including the properties" p:imageHeight="533" p:imageWidth="529" print-width="11cm" src="images/26210-SEEDOC_1_2_2.jpg" daisy-image-type="default" id="dsy_fig_18"></a></td>
</tr>
<tr>
<td class="imageCaption" align="center">Create message including the properties</td>
</tr>
</table>
                        
</p>
                    
</td>
                
</tr>
                
<tr>
                    
<td>
                        
<ol start="15">
                            
<li>
                                
<p>Please add a new table. The first table will always be the root table.</p>
                            
</li>
                            
<li>
                                
<p>For this example the CN_HEADER should be used as root.</p>
                            
</li>
                            
<li>
                                
<p>Mark all available fields and push the button add to select this fields to
the message structure.</p>
                            
</li>
                        
</ol>
                    
</td>
                    <td>
                        
<p align="center">
                            
<table class="plainTable" align="center">
<tr>
<td align="center"><a href="images/26211-SEEDOC_1_2_2.jpg"><img bookStorePath="/data/resources/26211-SEEDOC_1_2_2" daisy-caption="Select the table" p:imageHeight="413" p:imageWidth="411" src="images/26211-SEEDOC_1_2_2.jpg" daisy-image-type="default" id="dsy_fig_19"></a></td>
</tr>
<tr>
<td class="imageCaption" align="center">Select the table</td>
</tr>
</table>
                        
</p>
                        
<p align="center">
                            
<table class="plainTable" align="center">
<tr>
<td align="center"><a href="images/26212-SEEDOC_1_2_2.jpg"><img bookStorePath="/data/resources/26212-SEEDOC_1_2_2" daisy-caption="Select all fields" p:imageHeight="412" p:imageWidth="407" src="images/26212-SEEDOC_1_2_2.jpg" daisy-image-type="default" id="dsy_fig_20"></a></td>
</tr>
<tr>
<td class="imageCaption" align="center">Select all fields</td>
</tr>
</table>
                        
</p>
                    
</td>
                
</tr>
                
<tr>
                    
<td>
                        
<ol start="18">
                            
<li>
                                
<p>After setup of the first table structure you will see following screen.</p>
                            
</li>
                            
<li>
                                
<p>Please repeat the steps 14-16 for the table CN_LINE.</p>
                            
</li>
                        
</ol>
                        
<p class="note">Keep in mind to define the CN_HEADER table as related table.</p>
                    
</td>
                    <td>
                        
<p align="center">
                            
<table class="plainTable" align="center">
<tr>
<td align="center"><a href="images/26213-SEEDOC_1_2_2.jpg"><img bookStorePath="/data/resources/26213-SEEDOC_1_2_2" daisy-caption="Table structure of CN_HEADER" p:imageHeight="341" p:imageWidth="247" src="images/26213-SEEDOC_1_2_2.jpg" daisy-image-type="default" id="dsy_fig_21"></a></td>
</tr>
<tr>
<td class="imageCaption" align="center">Table structure of CN_HEADER</td>
</tr>
</table>
                        
</p>
                    
</td>
                
</tr>
                
<tr>
                    
<td>
                        
<ol start="20">
                            
<li>
                                
<p>Please add a second table and choose the CN_LINE table.</p>
                            
</li>
                            
<li>
                                
<p>This table should be related to the CN_HEADER table.</p>
                            
</li>
                        
</ol>
                    
</td>
                    <td>
                        
<p align="center">
                            
<table class="plainTable" align="center">
<tr>
<td align="center"><a href="images/26214-SEEDOC_1_2_2.jpg"><img bookStorePath="/data/resources/26214-SEEDOC_1_2_2" daisy-caption="Select a second table" p:imageHeight="446" p:imageWidth="511" print-width="11cm" src="images/26214-SEEDOC_1_2_2.jpg" daisy-image-type="default" id="dsy_fig_22"></a></td>
</tr>
<tr>
<td class="imageCaption" align="center">Select a second table</td>
</tr>
</table>
                        
</p>
                    
</td>
                
</tr>
                
<tr>
                    
<td>
                        
<ol start="22">
                            
<li>
                                
<p>To set the primary key information you have to click to the table field which
should be part of the primary key and set the position of the field at the
primary key.</p>
                            
</li>
                        
</ol>
                        
<ol start="23">
                            
<li>
                                
<p>The following fields should be marked as primary keys:</p>
                            
</li>
                        
</ol>
                        
<p>
                            
<strong>CN_HEADER:</strong>
                            
<br>
EDI_SENDER, EDI_RECEIVER, TRANS_NR<br>
                            
<strong>
                                
<br>
CN_LINE:</strong>
                            
<br>
EDI_SENDER, EDI_RECEIVER, TRANS_NR, CN_NR</p>
                    
</td>
                    <td>
                        
<p align="center">
                            
<a href="images/26661-SEEDOC_1_2_1.jpg"><img bookStorePath="/data/resources/26661-SEEDOC_1_2_1" p:imageHeight="391" p:imageWidth="479" print-width="11cm" src="images/26661-SEEDOC_1_2_1.jpg"></a>
                        
</p>
                    
</td>
                
</tr>
                
<tr>
                    
<td>
                        
<ol start="24">
                            
<li>To configure the relation between both tables you have to click at the node
on the link line.</li>
                        
</ol>
                        
<ol start="25">
                            
<li>The following fields should be linked:</li>
                        
</ol>
                        
<ul>
                            
<ul>
                                
<li>EDI_SENDER</li>
                                
<li>EDI_RECEIVER</li>
                                
<li>TRANS_NR</li>
                            
</ul>
                        
</ul>
                        
<p class="note">Please mark EDI_SENDER at the key list and the fields list.
After this you have to push the button link. Repeat this step for the other two
fields.</p>
                    
</td>
                    <td>
                        
<p align="center">
                            
<table class="plainTable" align="center">
<tr>
<td align="center"><a href="images/26215-SEEDOC_1_2_2.jpg"><img bookStorePath="/data/resources/26215-SEEDOC_1_2_2" daisy-caption="Set relation between the 2 tables" p:imageHeight="380" p:imageWidth="441" src="images/26215-SEEDOC_1_2_2.jpg" daisy-image-type="default" id="dsy_fig_23"></a></td>
</tr>
<tr>
<td class="imageCaption" align="center">Set relation between the 2 tables</td>
</tr>
</table>
                        
</p>
                    
</td>
                
</tr>
                
<tr>
                    
<td>
                        
<ol start="26">
                            
<li>
                                
<p>The result should look like this.</p>
                            
</li>
                        
</ol>
                    
</td>
                    <td>
                        
<p align="center">
                            
<table class="plainTable" align="center">
<tr>
<td align="center"><a href="images/26216-SEEDOC_1_2_2.jpg"><img bookStorePath="/data/resources/26216-SEEDOC_1_2_2" daisy-caption="Relation between two tables" p:imageHeight="392" p:imageWidth="139" src="images/26216-SEEDOC_1_2_2.jpg" daisy-image-type="default" id="dsy_fig_24"></a></td>
</tr>
<tr>
<td class="imageCaption" align="center">Relation between two tables</td>
</tr>
</table>
                        
</p>
                    
</td>
                
</tr>
                
<tr>
                    
<td>
                        
<ol start="27">
                            
<li>
                                
<p>Please save the SQL message and close the JDBC wizard. Back in
MappingDesigner you will find the new SQL structure.</p>
                            
</li>
                        
</ol>
                    
</td>
                    <td>
                        
<p align="center">
                            
<a href="images/26662-SEEDOC_1_2_1.jpg"><img bookStorePath="/data/resources/26662-SEEDOC_1_2_1" p:imageHeight="382" p:imageWidth="385" src="images/26662-SEEDOC_1_2_1.jpg"></a>
                        
</p>
                    
</td>
                
</tr>
                
<tr>
                    
<td>
                        
<ol start="28">
                            
<li>

                                
<p>To double check your structure you can have a look at the
<a href="..//classmaterial/SQLAdapter/msg_CN_MESSAGE.xml">trainer solution</a>
                                
</p>
                            
</li>
                        
</ol>
                    
</td>
                    <td></td>
                
</tr>
            
</tbody>
</table>
        
</div>
<div class="right">
<a href="dsy26232-SEEDOC.html"><img src="resources/images/big_right.gif"></a>
</div>
</div>
<div id="pageNumber">
<div class="numberAndTitle">
<span class="bottomTitle">Training BIC 6 Advanced</span><span class="count">55</span>
</div>
</div>
</div>
</body>
</html>
